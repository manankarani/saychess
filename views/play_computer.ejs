<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />

    <link rel="stylesheet" href="/css/chessboard-1.0.0.css" />

    <link rel="stylesheet" href="/css/play.css" />
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css" />
    <title>Saychess Play</title>
</head>

<body>
    
    <nav class="navbar nav">
        <div id="title">SayChess</div>
    </nav>

    <div class="row g-0">
        <div class="col-sm-2">
            <div class="col-sm-12" id="sticky-sidebar">
                <div id="mySidenav" class="sidenav">
                    <a href="#">Play</a>
                    <a href="#">Learn</a>
                    <a href="#">Puzzles</a>
                    <a href="#">Games</a>
                </div>
            </div>
        </div>
        <div class="col-sm-5 board text-center" id="main">
            <div class="card-time top">
                <div class="player" style="float: left">
                    <img src="/img/user.png" width="40" height="40" alt=""
                        style="padding: 2px; margin-right: 0.8em; border-radius: 50%" />
                    <span>Manan Karani</span>
                </div>
                <div class="clock" id="clk1">
                    <img src="/img/clk.png" width="30" height="30" alt="" style="padding: 2px; border-radius: 50%" />
                    <span class="text-dark" id="time1">...</span>
                </div>
            </div>
            <div id="board"></div>
            <div class="card-time bottom">
                <div class="player" style="float: left">
                    <img src="/img/user.png" width="40" height="40" alt=""
                        style="padding: 2px; margin-right: 0.8em; border-radius: 50%" />
                    <span>Manan Karani</span>
                </div>
                <div class="clock" id="clk2">
                    <img src="/img/clk.png" width="30" height="30" alt="" style="padding: 2px; border-radius: 50%" />
                    <span class="text-dark" id="time2">...</span>
                </div>
            </div>
        </div>
        <div class="pgn col-sm-5">
            <div class="accordion accordion-flush" id="accordionExample">
                <div class="accordion-item panes">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button pane-btn collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            Settings
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <div class="card-body">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span style="min-width: 220px" class="input-group-text"
                                            id="inputGroup-sizing-default">Base Time (min)</span>
                                    </div>
                                    <input type="number" value="5" min="1" max="360" class="form-control"
                                        aria-label="Base Time (min)" aria-describedby="inputGroup-sizing-default"
                                        id="timeBase" />
                                </div>

                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span style="min-width: 220px" class="input-group-text"
                                            id="inputGroup-sizing-default">Time Increment (sec)</span>
                                    </div>
                                    <input type="number" value="0" min="0" max="3600" class="form-control"
                                        aria-label="Time Increment (sec)" aria-describedby="inputGroup-sizing-default"
                                        id="timeInc" />
                                </div>

                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span style="min-width: 220px" class="input-group-text"
                                            id="inputGroup-sizing-default">Computer Difficulty (1-20)</span>
                                    </div>
                                    <input type="number" value="1" min="1" max="20" class="form-control"
                                        aria-label="Computer Difficulty (1-20)"
                                        aria-describedby="inputGroup-sizing-default" id="skillLevel" />
                                </div>

                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <label style="min-width: 220px" class="input-group-text" for="promote">Promote
                                            Pawns To</label>
                                    </div>
                                    <select class="custom-select" id="promote">
                                        <option value="q" selected>Queen</option>
                                        <option value="r">Rook</option>
                                        <option value="b">Bishop</option>
                                        <option value="n">Knight</option>
                                    </select>
                                </div>

                                <hr />
                                <div class="btn-group" data-toggle="buttons">
                                    <label class="btn btn-primary active" id="color-white">
                                        <input type="radio" name="color" /> Play as White</label>
                                    <label class="btn btn-primary" id="color-black">
                                        <input type="radio" name="color" /> Play as Black</label>
                                </div>

                                <div class="btn-group" data-toggle="buttons">
                                    <label class="btn btn-warning">
                                        <input type="checkbox" id="showScore" checked /> Show
                                        Evaluation Score</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-item panes">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed pane-btn" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Moves and Evaulation
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <h4>List Of Moves:</h4>
                            <div id="pgn"></div>

                            <hr />
                            <h4>Evaluation:</h4>
                            <pre id="evaluation"></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <button type="button" id="newgame" class="btn btn-lg" onclick="newGame()">
        Start New Game
    </button>
    <!--SCRIPTS-->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
    <script defer src="/js/chessboard-1.0.0.js"></script>
    <script defer src="/js/chess.js"></script>
    <script defer src="/js/game.js"></script>
    <script src="//socket.io/socket.io.js"></script>
</body>


<!--Socket Start-->
<script>
    const socket = io("ws://localhost:8000");
    socket.on("msg", (arg) => {
        console.log(arg); // world
    });
</script>
<!--Socket End-->
<!--Engine Start-->
<script>
    var wait_for_script;
    var newGame = function () { };

    /// We can load Stockfish.js via Web Workers or directly via a <script> tag.
    /// Web Workers are better since they don't block the UI, but they are not always avaiable.
    (function fix_workers() {
        var script_tag;
        /// Does the environment support web workers?  If not, include stockfish.js directly.
        if (!Worker || (location && location.protocol === "file:")) {
            var script_tag = document.createElement("script");
            script_tag.type = "text/javascript";
            script_tag.src = "stockfish.js";
            script_tag.onload = init;
            document.getElementsByTagName("head")[0].appendChild(script_tag);
            wait_for_script = true;
        }
    })();

    function init() {
        var game = engineGame();

        newGame = function newGame() {

            var baseTime = parseFloat($("#timeBase").val()) * 60;
            var inc = parseFloat($("#timeInc").val());
            var skill = parseInt($("#skillLevel").val());
            game.reset();
            game.setTime(baseTime, inc);
            game.setSkillLevel(skill);
            game.setPlayerColor(
                $("#color-white").hasClass("active") ? "white" : "black"
            );
            game.setDisplayScore($("#showScore").is(":checked"));
            game.start();
        };

        game.setSkillLevel;

        document
            .getElementById("skillLevel")
            .addEventListener("change", function () {
                game.setSkillLevel(parseInt(this.value, 10));
            });

        newGame();
    }

    /// If we load Stockfish.js via a <script> tag, we need to wait until it loads.
    if (!wait_for_script) {
        document.addEventListener("DOMContentLoaded", init);
    }
</script>
<!--Engine End-->

</html>